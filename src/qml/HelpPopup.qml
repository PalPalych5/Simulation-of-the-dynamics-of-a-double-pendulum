import QtQuick 2.15
import QtQuick.Controls 2.15
import QtQuick.Layouts 1.15

Popup {
    id: helpPopup
    x: 0
    y: 0
    width: parent.width
    height: parent.height
    modal: true
    focus: true
    closePolicy: Popup.CloseOnEscape | Popup.CloseOnPressOutside
    padding: 20

    background: Rectangle {
        color: mainWindow.isDarkTheme ? "#3A3A3A" : "#F5F5F5"
        border.color: mainWindow.isDarkTheme ? "#555555" : "#C0C0C0"
    }

    Button {
        id: closeIcon
        anchors.top: parent.top
        anchors.right: parent.right
        anchors.margins: 5

        icon.source: "qrc:/icons/cross.svg"
        icon.width: 18
        icon.height: 18
        icon.color: mainWindow.isDarkTheme ? "#CCCCCC" : "#333333"

        flat: true
        background: Item {}
        onClicked: helpPopup.close()
        
        ToolTip.text: "–ó–∞–∫—Ä—ã—Ç—å (Esc)"
        ToolTip.visible: hovered
    }

    ColumnLayout {
        anchors.fill: parent
        spacing: 0

        Label {
            text: qsTr("–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
            Layout.alignment: Qt.AlignHCenter
            Layout.topMargin: 15
            Layout.bottomMargin: 10
            font.bold: true
            font.pixelSize: 22
            color: mainWindow.isDarkTheme ? "#E0E0E0" : "#222222"
        }

        Rectangle {
            Layout.fillWidth: true
            Layout.preferredHeight: 1
            Layout.leftMargin: 20
            Layout.rightMargin: 20
            Layout.bottomMargin: 10
            color: mainWindow.isDarkTheme ? "#555" : "#CCC"
        }

        ScrollView {
            id: helpScrollView
            Layout.fillWidth: true
            Layout.fillHeight: true
            clip: true

            Item {
                width: helpScrollView.availableWidth
                implicitHeight: helpText.implicitHeight
            
                Text {
                    id: helpText
                    width: parent.width
                    wrapMode: Text.WordWrap
                    textFormat: Text.RichText
                    
                    onLinkActivated: function(link) {
                        Qt.openUrlExternally(link)
                    }

                    color: mainWindow.isDarkTheme ? "#DCDCDC" : "#333333"

                    text: {
                        var githubLink = "https://github.com/PalPalych5/Simulation-of-the-dynamics-of-a-double-pendulum";
                        var headerColor = mainWindow.isDarkTheme ? '#AADEFF' : '#005A9C';
                        var linkColor = mainWindow.isDarkTheme ? '#66B2FF' : '#0078D7';

                        return `
                        <p style="font-size:14px; line-height:1.5;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä –¥–≤–æ–π–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞! –≠—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π –∏ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏ –¥–≤–æ–π–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–µ–π —è–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö–∞–æ—Å–∞.</p>
                        <hr>
                        <p style="font-size:18px; color:${headerColor};"><b>1. –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</b></p>
                        
                        <p style="font-size:16px;"><b>–ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Å–≤–µ—Ä—Ö—É)</b></p>
                        <ul style="font-size:14px;">
                            <li><b>–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤:</b> –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ "–°–∏–º—É–ª—è—Ü–∏—è" –∏ "–ê–Ω–∞–ª–∏–∑".</li>
                            <li><b>–î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ (+):</b> –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ "–ê–Ω–∞–ª–∏–∑" –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞.</li>
                            <li><b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (‚öôÔ∏è):</b> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ 3D-–≥—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è FPS.</li>
                            <li><b>–°–ø—Ä–∞–≤–∫–∞ (?):</b> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.</li>
                            <li><b>–°–º–µ–Ω–∞ —Ç–µ–º—ã (—Å–æ–ª–Ω—Ü–µ/–ª—É–Ω–∞):</b> –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–≤–µ—Ç–ª–æ–π –∏ —Ç–µ–º–Ω–æ–π —Ç–µ–º–∞–º–∏.</li>
                            <li><b>–°–ª–∞–π–¥–µ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏:</b> –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å—é —Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏.</li>
                            <li><b>–°–±—Ä–æ—Å (‚ü≤):</b> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—è—Ç–Ω–∏–∫ –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∑–∞–¥–∞–Ω–Ω–æ–µ –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞, –∏ –æ—á–∏—â–∞–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é.</li>
                            <li><b>–°—Ç–∞—Ä—Ç / –ü–∞—É–∑–∞:</b> –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–ª–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—é.</li>
                            <li><b>–®–∞–≥ –≤–ø–µ—Ä–µ–¥ (‚Üí):</b> –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –ø–∞—É–∑–µ, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é –Ω–∞ –æ–¥–∏–Ω –º–∏–∫—Ä–æ—à–∞–≥.</li>
                        </ul>

                        <p style="font-size:16px;"><b>–ü–∞–Ω–µ–ª—å —Å–∏–º—É–ª—è—Ü–∏–∏ (—Å–ø—Ä–∞–≤–∞)</b></p>
                        <ul style="font-size:14px;">
                            <li><b>2D-–ø—Ä–æ–µ–∫—Ü–∏—è:</b> –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ö–æ–ª—Å—Ç, –≥–¥–µ –º–æ–∂–Ω–æ <b>–∑–∞–¥–∞–≤–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ —É–≥–ª—ã</b> –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º –≥—Ä—É–∑–æ–≤ –º—ã—à—å—é.</li>
                            <li><b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2D-–≤–∏–¥–æ–º:</b> –ö–Ω–æ–ø–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å <b>—Å–ª–µ–¥—ã</b>, –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å <b>–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã–µ —Å–µ—Ç–∫–∏</b> –∏ <b>—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</b> –≤–∏–¥ –≤ PNG.</li>
                            <li><b>–ü–∞–Ω–µ–ª—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏:</b> –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç <i>—Ç–µ–∫—É—â–∏–µ</i> –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —ç–Ω–µ—Ä–≥–∏–π. –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è.</li>
                            <li><b>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:</b> –ó–¥–µ—Å—å –≤—ã –∑–∞–¥–∞–µ—Ç–µ <i>–Ω–∞—á–∞–ª—å–Ω—ã–µ</i> —É—Å–ª–æ–≤–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ "–°–±—Ä–æ—Å".</li>
                        </ul>
                        <hr>
                        
                        <p style="font-size:18px; color:${headerColor};"><b>2. –†–µ–∂–∏–º "–ê–Ω–∞–ª–∏–∑": –†–∞–±–æ—Ç–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏</b></p>
                        <p style="font-size:14px;">–ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö. 3D-—Å—Ü–µ–Ω–∞ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –æ–±–ª–∞—Å—Ç—å—é –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.</p>
                        
                        <p style="font-size:16px;"><b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–º</b></p>
                        <ul style="font-size:14px;">
                            <li><b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ:</b> –ö–Ω–æ–ø–∫–∞ <b>"+"</b> —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ –æ–∫–Ω–æ. –ö–Ω–æ–ø–∫–∞ <b>"√ó"</b> –Ω–∞ –∫–∞–∂–¥–æ–º –≥—Ä–∞—Ñ–∏–∫–µ —É–¥–∞–ª—è–µ—Ç –µ–≥–æ.</li>
                            <li><b>–¢–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤:</b> –í—ã –º–æ–∂–µ—Ç–µ —Å—Ç—Ä–æ–∏—Ç—å <b>–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã</b> (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ t), <b>—Ñ–∞–∑–æ–≤—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã</b> (–Ω–∞–ø—Ä–∏–º–µ—Ä, œâ‚ÇÅ(Œ∏‚ÇÅ)) –∏ <b>–∫–∞—Ä—Ç—ã –ü—É–∞–Ω–∫–∞—Ä–µ</b>.</li>
                            <li><b>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</b> –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –∫–æ–ª–µ—Å–æ–º –º—ã—à–∏, –ø–µ—Ä–µ–º–µ—â–∞–π—Ç–µ ‚Äî –∑–∞–∂–∞–≤ –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É. –ö–Ω–æ–ø–∫–∞ —Å –≥–ª–∞–∑–æ–º (üëÅÔ∏è) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–∞–Ω–Ω—ã–º.</li>
                        </ul>

                        <p style="font-size:16px;"><b>–ö–∞—Ä—Ç–∞ –ü—É–∞–Ω–∫–∞—Ä–µ: –û—Å–æ–±—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</b></p>
                        <p style="font-size:14px;">–ö–∞—Ä—Ç–∞ –ü—É–∞–Ω–∫–∞—Ä–µ ‚Äî –º–æ—â–Ω–µ–π—à–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ö–∞–æ—Å–∞. –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (œâ‚ÇÇ –æ—Ç Œ∏‚ÇÇ) –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –º–∞—è—Ç–Ω–∏–∫ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç –ø–ª–æ—Å–∫–æ—Å—Ç—å Œ∏‚ÇÅ=0.</p>
                        <ul style="font-size:14px;">
                             <li><b>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:</b> –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∫–ª–∞–¥—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–º—É–ª—è—Ü–∏–π (–∞—Ç—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤) –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–Ω—É, —Å–º–µ–Ω–∏—Ç–µ —Ü–≤–µ—Ç, –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–±—Ä–æ—Å—å—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞. –°—Ç–∞—Ä—ã–µ —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ.</li>
                             <li><b>–†–∞–∑–º–µ—Ä —Ç–æ—á–µ–∫ –∏ –û—á–∏—Å—Ç–∫–∞ (üóëÔ∏è):</b> –ü–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–¥ –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏ —Å –∫–∞—Ä—Ç—ã.</li>
                        </ul>
                        <hr>

                        <p style="font-size:18px; color:${headerColor};"><b>–û–± –∞–≤—Ç–æ—Ä–µ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</b></p>
                        <p style="font-size:14px;"><b>–ê–≤—Ç–æ—Ä:</b> –ö—É–¥—Ä—è–≤—Ü–µ–≤ –ü–∞–≤–µ–ª –ü–∞–≤–ª–æ–≤–∏—á<br>
                           Email: <a href="mailto:pavlikkudryavtsev@gmail.com" style="color:${linkColor};">pavlikkudryavtsev@gmail.com</a></p>
                        <p style="font-size:14px;">–ü—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º, –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ GitHub:<br>
                           <a href="${githubLink}"><img src="qrc:/images/github_icon.png" width="32"></a></p>
                        `
                    }
                }
            }
        }
    }
} 